# App_20260128.jsx 변경 분석

## 1. Gemini 모델 업그레이드
- **이전**: `gemini-2.0-flash`
- **변경**: `gemini-2.5-flash-preview-09-2025`
- 위치: `src/app/api/analyze-dream/route.js`

## 2. 이미지 생성 Fallback 추가
- **이전**: Imagen 4.0만 사용 (단일 경로)
- **변경**: 2단계 fallback 시스템
  1. Imagen 4.0 (Primary)
  2. Gemini 2.5 Flash Image Preview (Fallback) — `gemini-2.5-flash-image-preview`로 이미지 생성 시도
- `negativePrompt`도 fallback에 전달됨

## 3. ART_STYLES 프롬프트 대폭 강화 + negativePrompt 추가
- **이전**: 짧은 프롬프트, `negativePrompt` 없음
- **변경**: 상세한 프롬프트 + `negativePrompt` 필드 추가
- 모든 9개 스타일에 적용

## 4. StatsView (무의식 리포트) 완전 재설계

| 항목 | 이전 | 변경 |
|------|------|------|
| 데이터 범위 | 최신 7개 고정 | 7개씩 배치로 히스토리 탐색 (reportIndex) |
| 배치 네비게이션 | 없음 | ChevronLeft/Right로 과거 리포트 탐색 |
| 이전 리포트 비교 | 없음 | 레이더 차트에 점선으로 이전 배치 오버레이 |
| 트렌드 표시 | 없음 | ComparisonIndicator (TrendingUp/TrendingDown/유지) |
| 긍정/부정 요소 | 없음 | Positive/Negative Elements 패널 (Sun/CloudRain) |
| 반복 상징 섹션 | 있음 (topSymbols) | 삭제됨 |
| 미완성 배치 UI | "마음의 지도를 그리는 중" | "리포트 작성 중" + REPORT CYCLE 번호 |
| Insight 텍스트 | 단일 기간 분석만 | 비교 기간 분석 포함 (trendText) |

## 5. RecordDreamView — negativePrompt 전달
- **이전**: `generateImage(finalPrompt)` — negativePrompt 미사용
- **변경**: `generateImage(finalPrompt, styleData.negativePrompt)` — negativePrompt 전달

## 6. OnboardingView — premium 필터 제거
- **이전**: `ART_STYLES.filter(s => !s.premium).map(...)` — premium 스타일 필터링
- **변경**: `ART_STYLES.map(...)` — 모든 스타일 표시

## 7. 사소한 UI 차이
- HomeView 버전 텍스트 크기 차이
- 일부 반응형 클래스 차이 (기존 코드가 더 반응형 대응 잘 되어 있어 유지)

## 반영 대상 파일
1. `src/constants/index.js` — ART_STYLES 프롬프트 교체 + negativePrompt 추가
2. `src/app/api/analyze-dream/route.js` — Gemini 모델 변경
3. `src/app/api/generate-image/route.js` — negativePrompt 지원 + Gemini fallback 추가
4. `src/services/api.js` — generateImage에 negativePrompt 전달
5. `src/components/views/RecordDreamView.jsx` — negativePrompt 전달
6. `src/components/views/StatsView.jsx` — 히스토리 탐색, 비교 분석, 긍정/부정 요소로 재작성
7. `src/components/views/OnboardingView.jsx` — premium 필터 제거
